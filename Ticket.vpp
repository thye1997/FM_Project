class Ticket

	types
		public Ticket :: ticketId: seq of char
				 issueDateTime : DateTime`DateTime
				 paidDateTime : DateTime`DateTime
				 isPaid: bool;

		
			
		public TicketList = map seq of char to Ticket;
		public PaidTicketList = map seq of char to Ticket;


	instance variables
		public newTicket: Ticket;
		public ticketList : TicketList := { |-> };
		public paidTicketList : PaidTicketList := { |-> };

		--create datime object
		public dateTime: DateTime:= new DateTime();

	operations
		public generateTicket: ()==> Ticket
			generateTicket()==(
			
				newTicket:= mk_Ticket("ID-1234", dateTime.getDateTime(), dateTime.getDateTime(), false);
				ticketList := ticketList munion {newTicket.ticketId |-> newTicket };
				return newTicket;
			);
			
	public payTicket:Ticket==> Ticket
		payTicket(tix)==
		(
			dcl ticket :Ticket := tix;
			if ticket.ticketId in set dom ticketList
				then (
					ticket.paidDateTime := dateTime.getDateTime();
					ticket.isPaid := true;
					paidTicketList := paidTicketList munion {ticket.ticketId |-> ticket };
					return ticket; --return paid ticket to user
				)
			
			else (
				return tix; --return ticket back to user
			);
		);
	
	public showNewTicket:()==> Ticket
		showNewTicket()==
			(
				return newTicket;
			);

	public showPaidTicket:()==> PaidTicketList
		showPaidTicket()==
			(
				return paidTicketList;
			);

end Ticket